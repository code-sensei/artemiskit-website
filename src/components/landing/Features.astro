---
import SectionHeading from '../ui/SectionHeading.astro';
import FeatureCard from './FeatureCard.astro';

const features = [
  {
    title: 'Scenario-Based Testing',
    description: 'Define test cases in YAML, run them across providers, and get consistent, reproducible results.',
    icon: `<svg class="w-5 h-5 text-orange-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <path d="M9 11l3 3L22 4" />
      <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
    </svg>`,
    features: [
      'Multi-turn conversation support',
      'Variable injection & templating',
      'Custom evaluation criteria',
    ],
    code: `scenarios:
  - name: greeting
    turns:
      - role: user
        content: "Hello!"
      - role: assistant
        expect:
          contains: ["Hi", "Hello"]`,
  },
  {
    title: 'Security Red Teaming',
    description: 'Automatically test for prompt injection, jailbreaks, and data extraction vulnerabilities.',
    icon: `<svg class="w-5 h-5 text-orange-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
    </svg>`,
    features: [
      '50+ built-in attack patterns',
      'Custom attack definitions',
      'Vulnerability reports',
    ],
    code: `$ artemiskit redteam \\
    --target "system prompt" \\
    --categories injection,jailbreak`,
  },
  {
    title: 'Stress Testing',
    description: "Understand your LLM's behavior under pressure with concurrent request testing.",
    icon: `<svg class="w-5 h-5 text-orange-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" />
    </svg>`,
    features: [
      'Configurable concurrency',
      'Latency percentiles (p50, p95, p99)',
      'Rate limiting detection',
    ],
    code: `$ artemiskit stress \\
    --concurrency 50 \\
    --iterations 500`,
  },
  {
    title: 'Multi-Provider Support',
    description: 'Native support for major LLM providers with unified configuration and results.',
    icon: `<svg class="w-5 h-5 text-orange-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <rect x="3" y="3" width="7" height="7" rx="1" />
      <rect x="14" y="3" width="7" height="7" rx="1" />
      <rect x="14" y="14" width="7" height="7" rx="1" />
      <rect x="3" y="14" width="7" height="7" rx="1" />
    </svg>`,
    features: [
      'OpenAI, Azure, Anthropic, Google',
      'Local models via Ollama',
      'Consistent API across providers',
    ],
    code: `provider: openrouter
model: anthropic/claude-3-opus`,
  },
  {
    title: 'Rich Reports',
    description: 'HTML and JSON reports with detailed metrics, pass/fail breakdowns, and configuration traceability.',
    icon: `<svg class="w-5 h-5 text-orange-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
      <polyline points="14 2 14 8 20 8" />
      <line x1="16" y1="13" x2="8" y2="13" />
      <line x1="16" y1="17" x2="8" y2="17" />
    </svg>`,
    features: [
      'Interactive HTML dashboards',
      'Machine-readable JSON export',
      'CI/CD integration ready',
    ],
    code: `$ artemiskit run test.yaml --save
â†’ artemis-output/report.html`,
  },
  {
    title: 'Developer Experience',
    description: 'CLI-first design, YAML configuration, and seamless integration with your workflow.',
    icon: `<svg class="w-5 h-5 text-orange-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
      <polyline points="4 17 10 11 4 5" />
      <line x1="12" y1="19" x2="20" y2="19" />
    </svg>`,
    features: [
      'Zero-config defaults',
      'Extensive customization',
      'TypeScript/Node.js native',
    ],
    code: `# Install globally
npm install -g @artemiskit/cli

# Run your first test
artemiskit run scenarios/test.yaml`,
  },
];
---

<section id="features" class="relative py-24 md:py-32 bg-[#09090b]">
  <!-- Background -->
  <div class="absolute inset-0" aria-hidden="true">
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_60%_40%_at_50%_50%,rgba(249,115,22,0.04),transparent)]"></div>
  </div>

  <div class="container relative">
    <SectionHeading
      badge="Features"
      title="Test Quality. Harden Security. Ship Faster."
      subtitle="One CLI to catch prompt failures, block injection attacks, and stress-test your LLM before production."
    />

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-5">
      {features.map((feature, index) => (
        <div
          class="opacity-0 animate-fade-in"
          style={`animation-delay: ${index * 80}ms; animation-fill-mode: forwards;`}
        >
          <FeatureCard {...feature} />
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  @keyframes fade-in {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fade-in 0.5s ease-out;
  }
</style>
