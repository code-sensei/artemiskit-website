---
import Button from '../ui/Button.astro';
import GradientOrb from '../ui/GradientOrb.astro';
import GridPattern from '../ui/GridPattern.astro';
import AnimatedTerminal from './AnimatedTerminal';
import HeroGitHubStats from './HeroGitHubStats';
---

<section class="relative min-h-screen flex items-center pt-24 pb-16 overflow-hidden">
  <!-- Background Effects -->
  <GridPattern fade="both" class="opacity-30" />
  <GradientOrb position="top-center" size="xl" intensity="medium" />

  <!-- Gradient mesh background -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none">
    <div class="absolute top-0 left-1/4 w-[800px] h-[800px] bg-primary-500/[0.07] rounded-full blur-[120px]"></div>
    <div class="absolute bottom-0 right-1/4 w-[600px] h-[600px] bg-orange-500/[0.05] rounded-full blur-[100px]"></div>
  </div>

  <div class="container relative z-10">
    <div class="grid lg:grid-cols-2 gap-16 lg:gap-20 items-center">

      <!-- Left Column - Content -->
      <div class="text-center lg:text-left">

        <!-- Badge -->
        <div class="hero-animate">
          <a
            href="https://github.com/code-sensei/artemiskit"
            target="_blank"
            rel="noopener noreferrer"
            class="inline-flex items-center gap-3 px-4 py-2 rounded-full bg-stone-900/80 border border-stone-700/50 hover:border-primary-500/50 hover:bg-stone-800/80 transition-all duration-300 mb-8 group backdrop-blur-sm"
          >
            <span class="flex items-center gap-2">
              <span class="relative flex h-2 w-2">
                <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span>
                <span class="relative inline-flex rounded-full h-2 w-2 bg-green-500"></span>
              </span>
              <span class="text-sm text-green-400 font-medium">Now Available</span>
            </span>
            <span class="text-stone-600">|</span>
            <span class="text-sm text-stone-400 group-hover:text-stone-300 transition-colors">Open Source CLI</span>
            <svg class="w-4 h-4 text-stone-500 group-hover:text-primary-400 group-hover:translate-x-0.5 transition-all" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </a>
        </div>

        <!-- Headline -->
        <h1 class="hero-animate hero-delay-1">
          <span class="block text-4xl sm:text-5xl md:text-6xl lg:text-[4rem] xl:text-[4.5rem] font-bold text-stone-50 tracking-[-0.03em] leading-[1.1]">
            Ship AI Products
          </span>
          <span class="block text-4xl sm:text-5xl md:text-6xl lg:text-[4rem] xl:text-[4.5rem] font-bold tracking-[-0.03em] leading-[1.1] mt-2">
            <span class="text-gradient-primary">That Actually Work</span>
          </span>
        </h1>

        <!-- Subheadline -->
        <p class="text-lg md:text-xl text-stone-400 mt-8 mb-10 max-w-xl mx-auto lg:mx-0 leading-relaxed hero-animate hero-delay-2">
          Catch broken prompts before your users do. Run
          <span class="text-stone-200">quality checks</span>,
          <span class="text-stone-200">security scans</span>, and
          <span class="text-stone-200">stress tests</span> â€” in one command.
        </p>

        <!-- Value Props - Compact -->
        <div class="flex flex-wrap items-center justify-center lg:justify-start gap-4 mb-10 hero-animate hero-delay-3">
          <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-stone-900/50 border border-stone-800/50">
            <svg class="w-4 h-4 text-primary-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
            </svg>
            <span class="text-sm text-stone-300">5-minute setup</span>
          </div>
          <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-stone-900/50 border border-stone-800/50">
            <svg class="w-4 h-4 text-primary-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
            <span class="text-sm text-stone-300">50+ attack patterns</span>
          </div>
          <div class="flex items-center gap-2 px-3 py-1.5 rounded-lg bg-stone-900/50 border border-stone-800/50">
            <svg class="w-4 h-4 text-primary-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12 6 12 12 16 14"/>
            </svg>
            <span class="text-sm text-stone-300">GitHub Actions ready</span>
          </div>
        </div>

        <!-- CTAs -->
        <div class="flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4 hero-animate hero-delay-4">
          <Button href="/docs/cli/getting-started/" variant="primary" size="lg" class="group min-w-[180px]">
            <span>Get Started Free</span>
            <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </Button>
          <Button href="https://github.com/code-sensei/artemiskit" variant="secondary" size="lg" external class="group min-w-[180px]">
            <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22" />
            </svg>
            <span>Star on GitHub</span>
          </Button>
        </div>

        <!-- Quick Install -->
        <div class="mt-10 hero-animate hero-delay-5">
          <div class="inline-flex items-center gap-3 px-4 py-3 rounded-xl bg-stone-900/70 border border-stone-800/70 backdrop-blur-sm">
            <code class="text-sm text-stone-300 font-mono">npm install -g @artemiskit/cli</code>
            <button
              id="copy-install"
              class="p-1.5 rounded-md hover:bg-stone-800 text-stone-500 hover:text-stone-300 transition-colors"
              title="Copy to clipboard"
            >
              <svg class="w-4 h-4 copy-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
              </svg>
              <svg class="w-4 h-4 check-icon hidden text-green-500" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="20 6 9 17 4 12"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Right Column - Terminal -->
      <div class="hero-animate hero-delay-3">
        <div class="relative">
          <!-- Glow effects -->
          <div class="absolute -inset-4 md:-inset-8 bg-gradient-to-br from-primary-500/20 via-primary-500/5 to-transparent rounded-3xl blur-3xl"></div>
          <div class="absolute -inset-2 md:-inset-4 bg-gradient-to-tl from-orange-500/10 via-transparent to-transparent rounded-3xl blur-2xl"></div>

          <!-- Terminal -->
          <div class="relative">
            <AnimatedTerminal client:visible />
          </div>
        </div>
      </div>
    </div>

    <!-- Social Proof - GitHub Stats -->
    <div class="mt-20 pt-10 border-t border-stone-800/50 hero-animate hero-delay-5">
      <p class="text-center text-sm text-stone-600 mb-6">Open source and growing</p>
      <HeroGitHubStats client:idle />
    </div>
  </div>
</section>

<style>
  @keyframes hero-fade-up {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .hero-animate {
    opacity: 0;
    animation: hero-fade-up 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards;
  }

  .hero-delay-1 { animation-delay: 100ms; }
  .hero-delay-2 { animation-delay: 200ms; }
  .hero-delay-3 { animation-delay: 300ms; }
  .hero-delay-4 { animation-delay: 400ms; }
  .hero-delay-5 { animation-delay: 500ms; }

  .text-gradient-primary {
    background: linear-gradient(135deg, #fb923c 0%, #f97316 40%, #ea580c 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
</style>

<script>
  // Copy install command to clipboard
  const copyButton = document.getElementById('copy-install');
  const copyIcon = copyButton?.querySelector('.copy-icon');
  const checkIcon = copyButton?.querySelector('.check-icon');

  copyButton?.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText('npm install -g @artemiskit/cli');
      copyIcon?.classList.add('hidden');
      checkIcon?.classList.remove('hidden');

      setTimeout(() => {
        copyIcon?.classList.remove('hidden');
        checkIcon?.classList.add('hidden');
      }, 2000);
    } catch (err) {
      console.error('Failed to copy:', err);
    }
  });
</script>
